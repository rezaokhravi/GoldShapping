<div class="permission-component p-fluid p-formgrid p-grid">

  <div class="p-field p-col-12 p-md-3">
    <button pButton pRipple type="button" (click)="createPermission()" label="افزودن مجوز" class="p-button-success"
            icon="bi bi-person-plus" iconPos="left"></button>
  </div>

  <div class="p-field p-col-12">
    <p-card>
      <p-table #dt
               [value]="permissions"
               [rows]="10"
               [paginator]="true"
               [globalFilterFields]="['MENU_TITLE']"
               [(selection)]="selectedPermission"
               [rowHover]="true"
               [scrollable]="true"
               [rowsPerPageOptions]="[10,25,50]"
               [loading]="loading"
               dataKey="ID"
               scrollDirection="both"
      >

        <ng-template pTemplate="caption">
          <div class="p-d-flex p-ai-center p-jc-between p-grid">
            <h5 class="p-col-12 p-md-2">لیست مجوز های کاربر</h5>
            <div class="p-col-12 p-md-10 ">
          <span class="p-input-icon-left">
                    <i class="pi pi-search"></i>
                    <input pInputText type="text"  (input)="search($event,dt)" placeholder="جستجو..." />
          </span>
            </div>
          </div>
        </ng-template>

        <ng-template pTemplate="header">
          <tr>
            <th style="width:150px"></th>

            <th style="width:200px" pSortableColumn="MENU_TITLE">عنوان منو
              <p-sortIcon field="MENU_TITLE"></p-sortIcon>
            </th>
            <th style="width:150px" pSortableColumn="CAN_SELECT">اجازه خواندن ؟
              <p-sortIcon field="CAN_SELECT"></p-sortIcon>
            </th>
            <th style="width:150px" pSortableColumn="CAN_INSERT">اجازه نوشتن ؟
              <p-sortIcon field="CAN_INSERT"></p-sortIcon>
            </th>
            <th style="width:150px" pSortableColumn="CAN_UPDATE">اجازه ویرایش ؟
              <p-sortIcon field="CAN_UPDATE"></p-sortIcon>
            </th>
            <th style="width:150px" pSortableColumn="CAN_DELETE">اجازه حذف ؟
              <p-sortIcon field="CAN_DELETE"></p-sortIcon>
            </th>


          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-userPermission>
          <tr>
            <td style="width:150px" class="p-d-flex p-jc-evenly">
              <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success p-button-sm "
                      (click)="editPermission(userPermission)"></button>
              <button pButton pRipple icon="pi pi-trash"
                      class="p-button-rounded p-button-warning p-button-sm  p-mr-lg-2 p-mr-md-2 "
                      (click)="deletePermission(userPermission)"></button>
            </td>
            <td style="width:200px">{{userPermission.MENU_TITLE}}</td>
            <td style="width:150px"> <i [ngStyle]="{'color': (userPermission.CAN_SELECT? 'green':'red')}" [ngClass]="'bi ' + (userPermission.CAN_SELECT? 'bi-check-square-fill':'bi-x-square-fill')"></i></td>
            <td style="width:150px"> <i [ngStyle]="{'color': (userPermission.CAN_INSERT? 'green':'red')}" [ngClass]="'bi ' + (userPermission.CAN_INSERT? 'bi-check-square-fill':'bi-x-square-fill')"></i></td>
            <td style="width:150px"> <i [ngStyle]="{'color': (userPermission.CAN_UPDATE? 'green':'red')}" [ngClass]="'bi ' + (userPermission.CAN_UPDATE? 'bi-check-square-fill':'bi-x-square-fill')"></i></td>
            <td style="width:150px"> <i [ngStyle]="{'color': (userPermission.CAN_DELETE? 'green':'red')}" [ngClass]="'bi ' + (userPermission.CAN_DELETE? 'bi-check-square-fill':'bi-x-square-fill')"></i></td>

          </tr>
        </ng-template>

        <ng-template pTemplate="emptymessage" let-columns>
          <tr>
            <td style="flex: 1 1 auto; justify-content: flex-start">اطلاعاتی جهت نمایش وجود ندارد</td>
          </tr>
        </ng-template>

      </p-table>

    </p-card>
  </div>


</div>

<p-toast position="bottom-left"></p-toast>
